---
// Header component
---

<header
  class="fixed inset-x-0 top-0 z-50 border-b border-neutral-200 bg-white/80 backdrop-blur-md dark:border-neutral-800 dark:bg-neutral-900/80"
  role="banner"
>
  <div class="container-wide flex h-16 items-center justify-between">
    <a href="/" class="flex items-center gap-3" aria-label="LGBT Libre - Inicio">
      <img src="/images/lgbtlibre-icon.svg" alt="LGBT Libre Logo" class="h-9 w-9 dark:hidden" />
      <img src="/images/lgbtlibre-white-icon.svg" alt="LGBT Libre Logo" class="hidden h-9 w-9 dark:block" />
      <span class="text-base font-bold tracking-tight">LGBT+Libre</span>
    </a>

    <nav class="hidden items-center gap-8 text-sm font-medium sm:flex" aria-label="Navegación principal">
      <!-- Dropdown: Nosotros -->
      <div class="group relative">
        <button class="inline-flex items-center gap-1 transition-colors hover:text-brand-700 dark:hover:text-brand-300">
          Nosotros
          <svg class="h-4 w-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="invisible absolute left-0 top-full mt-2 w-56 rounded-lg border border-neutral-200 bg-white py-2 opacity-0 shadow-lg transition-all group-hover:visible group-hover:opacity-100 dark:border-neutral-700 dark:bg-neutral-800">
          <a href="/#quienes-somos" class="block px-4 py-2 transition-colors hover:bg-neutral-100 hover:text-brand-700 dark:hover:bg-neutral-700 dark:hover:text-brand-300">Quiénes somos</a>
          <a href="/#nuestra-historia" class="block px-4 py-2 transition-colors hover:bg-neutral-100 hover:text-brand-700 dark:hover:bg-neutral-700 dark:hover:text-brand-300">Nuestra historia</a>
          <a href="/#marco-estrategico" class="block px-4 py-2 transition-colors hover:bg-neutral-100 hover:text-brand-700 dark:hover:bg-neutral-700 dark:hover:text-brand-300">Marco estratégico</a>
        </div>
      </div>

      <!-- Dropdown: Actividades -->
      <div class="group relative">
        <button class="inline-flex items-center gap-1 transition-colors hover:text-brand-700 dark:hover:text-brand-300">
          Actividades
          <svg class="h-4 w-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="invisible absolute left-0 top-full mt-2 w-56 rounded-lg border border-neutral-200 bg-white py-2 opacity-0 shadow-lg transition-all group-hover:visible group-hover:opacity-100 dark:border-neutral-700 dark:bg-neutral-800">
          <a href="/#lineas-accion" class="block px-4 py-2 transition-colors hover:bg-neutral-100 hover:text-brand-700 dark:hover:bg-neutral-700 dark:hover:text-brand-300">Líneas de acción</a>
          <a href="/#campanas" class="block px-4 py-2 transition-colors hover:bg-neutral-100 hover:text-brand-700 dark:hover:bg-neutral-700 dark:hover:text-brand-300">Incidencia</a>
        </div>
      </div>

      <!-- Links simples -->
      <a class="transition-colors hover:text-brand-700 dark:hover:text-brand-300" href="/gallery">Galería</a>
      <a class="transition-colors hover:text-brand-700 dark:hover:text-brand-300" href="/#noticias">Noticias</a>

      <!-- CTA Contacto -->
      <a class="btn-primary px-4 py-2 text-sm" href="/#newsletter">
        Contacto
      </a>
    </nav>

    <div class="flex items-center gap-2">
      <button id="toggle-dark" class="btn-ghost rounded-full p-2" aria-label="Cambiar tema">
        <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
        </svg>
      </button>
      <button class="btn-ghost inline-flex items-center gap-2 sm:hidden" aria-expanded="false" aria-controls="mobile-menu" id="menu-btn">
        <span>Menú</span>
        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Menú móvil -->
  <div id="mobile-menu" class="container-wide hidden border-t border-neutral-200 bg-white py-3 dark:border-neutral-800 dark:bg-neutral-900 sm:hidden">
    <div class="grid gap-2 text-sm">
      <a class="mobile-nav-link rounded px-2 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800" href="/#quienes-somos">Quiénes somos</a>
      <a class="mobile-nav-link rounded px-2 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800" href="/#nuestra-historia">Nuestra historia</a>
      <a class="mobile-nav-link rounded px-2 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800" href="/#lineas-accion">Líneas de acción</a>
      <a class="mobile-nav-link rounded px-2 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800" href="/#marco-estrategico">Marco estratégico</a>
      <a class="mobile-nav-link rounded px-2 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800" href="/#campanas">Incidencia</a>
      <a class="mobile-nav-link rounded px-2 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800" href="/gallery">Galería</a>
      <a class="mobile-nav-link rounded px-2 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800" href="/#noticias">Noticias</a>
      <a class="mobile-nav-link rounded px-2 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800" href="/#newsletter">Contáctenos</a>
    </div>
  </div>
</header>

<script>
  // Smooth scroll con offset para header fijo
  document.addEventListener('DOMContentLoaded', () => {
    const headerHeight = 64; // Altura del header en px
    const mobileMenu = document.getElementById('mobile-menu');

    // Manejar clicks en todos los links de navegación
    const navLinks = document.querySelectorAll('a[href^="#"]');

    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        const href = link.getAttribute('href');
        if (!href || href === '#') return;

        e.preventDefault();

        const targetId = href.substring(1);
        const targetElement = document.getElementById(targetId);

        if (targetElement) {
          const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - headerHeight;

          window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
          });

          // Cerrar menú móvil si está abierto
          if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
            mobileMenu.classList.add('hidden');
          }
        }
      });
    });
  });
</script>

